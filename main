task.spawn(function()
    if not game:IsLoaded() then
        game.Loaded:Wait()
    end

    local Players = game:GetService("Players")
    local TeleportService = game:GetService("TeleportService")
    local player = Players.LocalPlayer
    local guiParent = player:WaitForChild("PlayerGui", 5) or game:GetService("CoreGui")

    local screenGui = Instance.new("ScreenGui")
    screenGui.Name = "ServerButtonsUI"
    screenGui.ResetOnSpawn = false
    screenGui.IgnoreGuiInset = true
    screenGui.Parent = guiParent

    -- Rejoin Same Server Button
    local dragFrame1 = Instance.new("Frame")
    dragFrame1.Size = UDim2.new(0, 150, 0, 45)
    dragFrame1.Position = UDim2.new(0.5, -160, 1, -130)
    dragFrame1.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
    dragFrame1.BorderSizePixel = 0
    dragFrame1.Active = true
    dragFrame1.Draggable = true
    dragFrame1.Parent = screenGui

    local rejoinBtn = Instance.new("TextButton")
    rejoinBtn.Size = UDim2.new(1, 0, 1, 0)
    rejoinBtn.Text = "Rejoin Server"
    rejoinBtn.TextColor3 = Color3.new(1, 1, 1)
    rejoinBtn.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
    rejoinBtn.Font = Enum.Font.GothamBold
    rejoinBtn.TextSize = 17
    rejoinBtn.AutoButtonColor = true
    rejoinBtn.Parent = dragFrame1

    rejoinBtn.MouseButton1Click:Connect(function()
        TeleportService:TeleportToPlaceInstance(game.PlaceId, game.JobId, player)
    end)

    -- New Server Button
    local dragFrame2 = Instance.new("Frame")
    dragFrame2.Size = UDim2.new(0, 150, 0, 45)
    dragFrame2.Position = UDim2.new(0.5, 10, 1, -130)
    dragFrame2.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
    dragFrame2.BorderSizePixel = 0
    dragFrame2.Active = true
    dragFrame2.Draggable = true
    dragFrame2.Parent = screenGui

    local newServerBtn = Instance.new("TextButton")
    newServerBtn.Size = UDim2.new(1, 0, 1, 0)
    newServerBtn.Text = "New Server"
    newServerBtn.TextColor3 = Color3.new(1, 1, 1)
    newServerBtn.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
    newServerBtn.Font = Enum.Font.GothamBold
    newServerBtn.TextSize = 17
    newServerBtn.AutoButtonColor = true
    newServerBtn.Parent = dragFrame2

    newServerBtn.MouseButton1Click:Connect(function()
        TeleportService:Teleport(game.PlaceId, player) -- Joins a random public server
    end)
end)
